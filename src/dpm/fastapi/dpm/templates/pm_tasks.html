{% extends "pm_sb_base.html" %}

{% block title %}Project Management Projects for {{domain}} {% endblock %}
{% block sb_main_content %}
<main class="flex-1 p-6">
{% if tasks %}
<ul class="space-y-1">
    {% for task in tasks %}
    <a href="{{ url_for('pm:task-detail', domain=domain, task_id=task.task_id) }}"
       class="flex items-center gap-2 p-2 rounded-lg hover:bg-base-300">
        {# Status indicator #}
        {% if task.status == 'Done' %}
        <span class="badge badge-success badge-sm">Done</span>
        {% elif task.status == 'InProgress' %}
        <span class="badge badge-warning badge-sm">In Progress</span>
        {% elif task.status == 'Blocked' %}
        <span class="badge badge-error badge-sm">Blocked</span>
        {% else %}
        <span class="badge badge-ghost badge-sm">{{ task.status }}</span>
        {% endif %}

        <span>{{ task.name }}</span>

        {% if task.description %}
        <span class="text-base-content/50 text-sm truncate max-w-xs">- {{ task.description }}</span>
        {% endif %}

        <span class="ml-auto flex items-center gap-1">
            <span hx-get="{{ url_for('pm:task-edit-modal', domain=domain, task_id=task.task_id) }}"
               hx-target="#edit-modal-container"
               hx-swap="innerHTML"
               onclick="event.preventDefault();"
               class="btn btn-ghost btn-xs"
               title="Edit task">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                </svg>
            </span>
        </span>
    </a>
    {% endfor %}
</ul>
{% else %}
<p class="text-base-content/50 italic p-2">No tasks.</p>
{% endif %}
</main>
{% endblock %}
